# ============================================================
# InsightLink 生产环境配置模板
# 复制此文件为 .env 并填入真实数据:  cp .env.production.example .env
# 警告: .env 文件包含敏感信息，请勿提交到 Git！
# ============================================================

# --- 应用基础配置 ---
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://your-domain.com
NEXTAUTH_URL=https://your-domain.com
# 用以下命令生成随机密钥: openssl rand -base64 32
NEXTAUTH_SECRET=your-random-secret-key-at-least-32-chars

# --- 数据库配置 ---
# Docker 内部容器互联时，HOST 必须使用服务名 "postgres"
POSTGRES_USER=admin
POSTGRES_PASSWORD=secure_password_here
POSTGRES_DB=viewtrace
DATABASE_URL=postgresql://admin:secure_password_here@postgres:5432/viewtrace?schema=public

# --- 对象存储 ---
# 三选一，取消对应的注释块并填写配置

# ========== 方案 A：本地磁盘存储 (local) ==========
# 文件存在服务器硬盘上，无需额外配置，适合测试
# STORAGE_TYPE=local

# ========== 方案 B：Cloudflare R2 ==========
# 免费额度大，推荐首选
# STORAGE_TYPE=s3
# S3_ENDPOINT=https://<ACCOUNT_ID>.r2.cloudflarestorage.com
# S3_BUCKET=your-bucket-name
# S3_REGION=auto
# S3_ACCESS_KEY=your-r2-access-key-id
# S3_SECRET_KEY=your-r2-secret-access-key
# S3_PUBLIC_DOMAIN=https://pub.your-domain.com

# ========== 方案 C：AWS S3 ==========
# STORAGE_TYPE=s3
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_BUCKET=your-bucket-name
# S3_REGION=ap-northeast-1
# S3_ACCESS_KEY=your-aws-access-key-id
# S3_SECRET_KEY=your-aws-secret-access-key
# S3_PUBLIC_DOMAIN=https://your-bucket.s3.amazonaws.com

# --- 当前生效的配置（将上方选择的方案填到这里）---
STORAGE_TYPE=s3
S3_ENDPOINT=
S3_BUCKET=
S3_REGION=auto
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_PUBLIC_DOMAIN=

# --- 邮件服务 (可选，用于找回密码/通知) ---
SMTP_HOST=smtp.example.com
SMTP_PORT=465
SMTP_SECURE=true
SMTP_USER=noreply@example.com
SMTP_PASS=your-smtp-password
SMTP_FROM=noreply@example.com
SMTP_FROM_NAME=InsightLink

# --- 管理员初始化 ---
# 应用首次启动时，会自动创建以下管理员账号（若不存在）
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=change-this-password
ADMIN_NAME=Admin
